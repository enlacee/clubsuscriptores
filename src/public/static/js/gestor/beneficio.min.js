$(function(){var a=(urls.fDayCurrent<10?("0"+urls.fDayCurrent):urls.fDayCurrent)+"/"+(urls.fMonthCurrent<10?("0"+urls.fMonthCurrent):urls.fMonthCurrent)+"/"+urls.fYearCurrent;
var f=/^[0-9]{1}[x][0-9]{1}$|^[0-9]{1,2}[%]$/;var b=apmaximo;var e={email:{good:"¡OK!",bad:"No parece ser un correo electrónico válido.",def:"Ingrese e-mail correcto",mailValid:"Email ya registrado."},requerido:{good:"¡OK!",bad:"Campo Requerido.",def:"Campo Requerido."},fecha_inicio:{good:"¡OK!",bad:"Fecha Requerida.",def:"Debe ingresar una fecha de inicio."},fecha_fin:{good:"¡OK!",bad:"Fecha Requerida.",def:"Debe ingresar una fecha de finalizacion."},categorias:{good:"¡OK!",bad:"Debe seleccionar al menos una categoria.",def:"Seleccione las categorias."},establecimiento:{good:"¡OK!",bad:"Debe seleccionar un establecimiento",def:"Seleccione un establecimiento."},chapita:{good:"¡OK!",bad:"Debe seleccionar el color de la chapita",def:"Seleccione un color para la chapita."},tipo_beneficio:{good:"¡OK!",bad:"Debe seleccionar el tipo de beneficio",def:"Seleccione el tipo de beneficio."},minCupones:{bad:"El Stock no puede ser menor que el Límite cupones."},altoHTMLMax:{bad:"El alto del contenido HTML(heigth) es mayor al permitido por página en el catálogo."},pdf:{bad:"Debe subir el archivo PDF."},stock:{bad:"Debe ingresar mas valor que los cupones generados."},maximo_por_subscriptor:{bad:"Debe ingresar mas valor que los cupones generados por suscriptor."}};
var d={rs:".response",okR:"ready",sendFlag:"sendN",loading:'<div class="loading"></div>'};jq.pasteMaxlength("#descripcion");jq.pasteMaxlength("#descripcion_corta");
jq.pasteMaxlength("#valor");jq.pasteMaxlength("#cuando");jq.pasteMaxlength("#como");jq.pasteMaxlength("#descripcion_cupon");jq.pasteMaxlength("#direccion");
var c={init:function(){var g=$("#fecha_inicio_vigencia, #fecha_fin_vigencia").datepicker({changeMonth:true,changeYear:true,minDate:-0,showMonthAfterYear:false,onSelect:function(l){var m=this.id=="fecha_inicio_vigencia"?"minDate":"maxDate",h=$(this).data("datepicker"),i=$.datepicker.parseDate(h.settings.dateFormat||$.datepicker._defaults.dateFormat,l,h.settings);
g.not(this).datepicker("option",m,i);var o=$("#fecha_fin_vigencia");var k=o.parents(".bloqueNbeneficio").find(d.rs);if($("#fecha_inicio_vigencia").val()==a){$("#estado").val(3);
}if($("#fecha_fin_vigencia").val()!=""){k.removeClass("bad").addClass("good").text(e.fecha_fin.good);o.addClass(d.okR);}else{k.removeClass("good").addClass("bad").text(e.fecha_fin.bad);
o.removeClass(d.okR);}if($("#fecha_inicio_vigencia").val()!=""){var j=$("#fecha_inicio_vigencia");var n=j.parents(".bloqueNbeneficio").find(d.rs);n.removeClass("bad").addClass("good").text(e.fecha_inicio.good);
j.addClass(d.okR);}else{k.removeClass("good").addClass("bad").text(e.fecha_fin.bad);o.removeClass(d.okR);}}});$("#cat_disponibles option").each(function(h){$(this).removeAttr("selected");
});$("#cat_seleccionadas option").each(function(h){$(this).removeAttr("selected");});$("#establecimiento_id").bind("change",function(h){var j=$(this).parents(".bloqueNbeneficio").find(d.rs);
$("#email_info").val("");$("#email_info").attr("disabled",false);$("#telefono_info").val("");$("#telefono_info").attr("disabled",false);if($("#email_info_establecimiento").is(":checked")){$("#email_info_establecimiento").attr("checked",!$("#email_info_establecimiento").is(":checked"));
$("#email_info_establecimiento").trigger("click",null);}if($("#telefono_info_establecimiento").is(":checked")){$("#telefono_info_establecimiento").attr("checked",!$("#email_info_establecimiento").is(":checked"));
$("#telefono_info_establecimiento").trigger("click",null);}if($("#establecimiento_id").val()==0){j.removeClass("good").addClass("bad").text(e.establecimiento.bad);
}else{j.removeClass("bad").addClass("good").text(e.establecimiento.good);$(this).addClass(d.okR);}});$("#estado").bind("change",function(h){if($(this).val()==3){$("#fecha_inicio_vigencia").val(a);
$("#fecha_fin_vigencia").val("").removeClass("ready");var j=$("#fecha_fin_vigencia").parents(".bloqueNbeneficio").find(d.rs);j.removeClass("good").addClass("bad").text(e.establecimiento.bad);
}});},categorias:function(g,m,l,i,h,k,j){$(g).click(function(){var u=$(m+" option:selected");u.remove().appendTo(l).removeAttr("selected");var t=$(this).parents(".bloqueNbeneficio").find(d.rs);
var s=$("#pdf_resultado"),p=$("#resultado"),v=$("#dataUpPdf"),n=$("#pdf_msg"),q=false,o=false;$.each(u,function(w,r){if(parseInt($.trim($(r).val()))==idSorteoResultado){q=true;
}else{if(parseInt($.trim($(r).val()))==idSorteoDisponibles){o=true;}}});c.detacado_banner(m,i,o,false,"#tipo_beneficio_id");if(q){if(m==i){s.removeClass("requerido ready");
p.slideUp("fast");}else{s.addClass("requerido");p.slideDown("fast");s.val("");v.text("");n.text("").removeClass("good bad");}}s.bind("change",function(){var r=$(this),w=r.val();
v.text(w);});if($("select"+i+" option").size()>0){t.removeClass("bad").addClass("good").text(e.categorias.good);$(i).addClass(d.okR);}else{t.removeClass("good").addClass("bad").text(e.categorias.bad);
$(i).removeClass(d.okR);}});},inputPdfInfo:function(g,i){var h=$(g),j=$(i);h.bind("change",function(){var k=$(this),l=k.val();j.text(l);});},detacado_banner:function(m,k,g,l,i){var j=$("#bannerSorteoDisponible"),h=false;
if((g&&m==k&&!l)||(!l&&!g)){if(i=="#cat_seleccionadas"){$("#cat_seleccionadas option").each(function(){if(parseInt($.trim($(this).val()))==idSorteoDisponibles){h=true;
}});}else{if(i=="#tipo_beneficio_id"){if($(i).val()==tipBen_idConcurso){h=true;}}}}else{h=true;}if(h){j.slideDown("fast");}else{j.slideUp("fast");$("#es_destacado_banner").attr("checked",false);
}},submit:function(){$("#btnUpdate").bind("click",function(p){p.preventDefault();$("#cat_disponibles option").each(function(u){$(this).attr("selected","selected");
});$("#cat_seleccionadas option").each(function(u){$(this).attr("selected","selected");});var s=$("#dataOLRes"),l=(s.find("li")).size(),o=true,g=$("#inputValidTD"),i=$("#resListNMB");
if(l>0){var h=s.find('input[type="text"]');$.each(h,function(w,u){if($.trim($(u).val())==$.trim($(u).attr("alt"))||$.trim($(u).val())==""){o=false;g.removeClass("ready").addClass("requerido");
i.text(e.requerido.bad).removeClass("good").addClass("bad");return false;}else{o=true;g.addClass("ready");i.text(e.requerido.good).removeClass("bad").addClass("good");
}});}var j=$("#chapita"),n=j.val(),t=j.parents(".bloqueNbeneficio").find(".response"),k=(n.length>1&&f.test(n)),q="Ingrese el contenido correcto de la chapita. Ejm: 2x1, 45%",r=$("#formBeneficio"),m=$("#respEditor");
m.removeClass("bad").text("");if($("#formBeneficio ."+d.okR).size()<$("#formBeneficio .requerido").size()){$("#formBeneficio .requerido").not(".ready").removeClass("ready").parents(".bloqueNbeneficio").find(".response").removeClass("def good").addClass("bad").text(e.requerido.bad);
if($.trim(n)!=""){if(k){t.text("").removeClass("good bad");}else{t.text(q).addClass("bad").removeClass("good");}}c._heightIframe();}else{if(n!=""){if(k){c._heightIframe();
setTimeout(function(){if(parseInt($("#iframeH").val())<=b){r.submit();}else{$("html, body").animate({scrollTop:m.offset().top-100},"slow");m.addClass("bad").text(e.altoHTMLMax.bad);
}},0);}else{t.text(q).addClass("bad").removeClass("good");}}else{c._heightIframe();setTimeout(function(){if(parseInt($("#iframeH").val())<=b){r.submit();
}else{$("html, body").animate({scrollTop:m.offset().top-270},"slow");m.addClass("bad").text(e.altoHTMLMax.bad);}},0);}}});},_heightIframe:function(){$("#dataLoad2").remove();
var h=$("#iframeCEL").contents().find("body").html(),g="";$("body").append('<div id="dataLoad2"></div>');setTimeout(function(){g=($("#dataLoad2").html(h)).height();
$("input#iframeH").val(g+10);},0);},logo:function(){$("#path_logo").bind("change",function(){$("#img_avatar").html("").addClass("loading");});},fMail:function(g,h,j,i){$(g).bind("blur",function(){var l=$(this),m=l.parents(".bloqueNbeneficio").find(d.rs),k=/^(([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+)?$/g;
if(k.test(l.val())&&l.val()!=""){m.removeClass("bad").addClass("good").text(h);l.addClass(d.okR);}else{m.removeClass("good").addClass("bad").text(j);l.removeClass(d.okR);
}});},fOnlyNumTlf:function(g){return $(g).each(function(){var i=$(this),h=false;i.keypress(function(k){var j=k.keyCode||k.charCode||k.which||window.e;if(j==16){h=true;
}return(j==8||j==9||j==32||j==40||j==41||j==42||j==45||j==35||(j==48&&h==false)||(j==49&&h==false)||(j==50&&h==false)||(j==51&&h==false)||(j==52&&h==false)||(j==53&&h==false)||(j==54&&h==false)||(j==55&&h==false)||(j==56&&h==false)||(j==57&&h==false));
});i.bind("paste",function(){setTimeout(function(){var j=i.val();var k=j.replace(/[^0-9-#-*-(-)--]/g,"");i.val(k);},0);});});},fOnlyNum:function(g){return $(g).each(function(){var i=$(this),h=false;
i.keypress(function(k){var j=k.keyCode||k.charCode||k.which||window.e;if(j==16){h=true;}return(j==8||j==9||j==32||(j==48&&h==false)||(j==49&&h==false)||(j==50&&h==false)||(j==51&&h==false)||(j==52&&h==false)||(j==53&&h==false)||(j==54&&h==false)||(j==55&&h==false)||(j==56&&h==false)||(j==57&&h==false));
});i.bind("paste",function(){setTimeout(function(){var j=i.val();var k=j.replace(/[^0-9]/g,"");i.val(k);},0);});});},fInput:function(h,j,l,k){var g=$(h),i=g.parents(".bloqueNbeneficio").find(d.rs);
g.blur(function(){var n=$(this),m=n.val(),o;if(m.length>0){i.removeClass("bad").addClass("good").text(j);n.addClass(d.okR);}else{i.removeClass("good").addClass("bad").text(l);
n.removeClass(d.okR);}if(h=="#stock"){if($(h).attr("formu")=="edit"){c.validStockMin(n,i,"#maximo_por_subscriptor",null);}else{c.validStockLimite(n,i,"#maximo_por_subscriptor");
}}if(h=="#maximo_por_subscriptor"){if($(h).attr("formu")=="edit"){c.validCantMinCuponSuscriptor(n,i,"#stock",null);}else{c.validStockLimite(n,i,"#stock");
}}}).keyup(function(){var m=$(this);if(parseInt(m.val()).length==0){i.removeClass("good").addClass("bad").text(l);m.removeClass(d.okR);}else{i.removeClass("good bad").text(k);
m.addClass(d.okR);}if(h=="#stock"){if($(h).attr("formu")=="edit"){}else{c.validStockLimite(m,i,"#maximo_por_subscriptor");}}if(h=="#maximo_por_subscriptor"){if($(h).attr("formu")=="edit"){}else{c.validStockLimite(m,i,"#stock");
}}});},fInputSumarBeneficio:function(j,i){var h=$(j),k=$(i);h.blur(function(){var l=0;h.each(function(m){if(parseInt($(this).val())){l=l+parseInt($(this).val());
}});k.val(l);});var g=0;$.each($("ol#dataOLRes li.rowCont input"),function(l,m){if($(m).attr("rel")!=undefined){if($(m).attr("rel")=="mxs"){g++;}}});if(g>0){$("#maximo_por_subscriptor").attr("disabled",true);
}else{$("#maximo_por_subscriptor").attr("disabled",false);}},fInputSumarBeneficio2:function(j,i){var h=$(j),l=$(i);var k=0;h.each(function(m){if(parseInt($(this).val())){k=k+parseInt($(this).val());
}});l.val(k);var g=0;$.each($("ol#dataOLRes li.rowCont input"),function(m,n){if($(n).attr("rel")!=undefined){if($(n).attr("rel")=="mxs"){g++;}}});if(g>0){$("#maximo_por_subscriptor").attr("disabled",true);
}else{$("#maximo_por_subscriptor").attr("disabled",false);$("#maximo_por_subscriptor").val("");$("#maximo_por_subscriptor").focus();}},showInfo:function(i){var g=$(i),h=g.parents(".bloqueNbeneficio").find(d.rs);
h.removeClass("bad good");g.blur(function(){h.text("");}).keyup(function(){var k=$(this),j=k.attr("maxlength");if((k.val()).length==0){h.text("");}else{if($.trim(j)!=""){h.text("Máximo "+j+" Caracteres.");
}}});},validCantMinCuponSuscriptor:function(n,g,k,h){var j=$(k),m,o,l;if(parseInt(n.val())){if(h==null){var i={idBen:$("#idBen").val(),cant:n.val()};}else{var i={idBen:$("#idBen").val(),cant:n.val(),idTipDesc:h.replace("d_cantidad[","").replace("]","")};
}$.ajax({url:"/gestor/beneficios/obtener-cupon-min-suscriptor",type:"GET",dataType:"json",data:i,async:false,success:function(p){m=p.valor;l=" (actualmente en "+p.cant+")";
}});o=parseInt(n.val())>parseInt(j.val());if(!m){n.removeClass(d.okR);g.removeClass("good").addClass("bad").text(e.stock.bad+l);}else{if(o){n.removeClass(d.okR);
g.removeClass("good").addClass("bad").text(e.minCupones.bad);}else{n.addClass(d.okR);g.removeClass("bad").addClass("good").text(e.requerido.good);}}}else{n.removeClass(d.okR);
g.removeClass("good").addClass("bad").text(e.requerido.bad);}},validCantMaxPorSuscriptor:function(h){var g=$(h);var i=g.parents(".bloqueNbeneficio").find(d.rs);
var l,k,j;g.blur(function(){var n=$(this);var m=n.attr("name");if(parseInt(n.val())){j={idBen:$("#idBen").val(),cant:n.val(),idTipDesc:m.replace("detTipDesc[","").replace("][d_maximo_por_suscriptor]","")};
$.ajax({url:"/gestor/beneficios/obtener-cupon-max-suscriptor-tipdesc",type:"GET",dataType:"json",data:j,async:false,success:function(o){l=o.valor;k=" (actualmente en "+o.cant+")";
}});}else{l=false;k="";}if(!l){n.removeClass(d.okR);i.removeClass("good").addClass("bad").text(e.stock.bad+k);}else{n.addClass(d.okR);i.removeClass("bad").addClass("good").text(e.requerido.good);
}});},validStockMin:function(n,g,k,h){var j=$(k),m,o,l;if(parseInt(n.val())){if(h==null){var i={idBen:$("#idBen").val(),cant:n.val()};}else{var i={idBen:$("#idBen").val(),cant:n.val(),idTipDesc:h.replace("d_cantidad[","").replace("]","")};
}$.ajax({url:"/gestor/beneficios/obtener-stock-minimo",type:"GET",dataType:"json",data:i,async:false,success:function(p){m=p.valor;l=" (actualmente en "+p.cant+")";
}});}else{m=false;}o=parseInt(n.val())<parseInt(j.val());if(!m){n.removeClass(d.okR);g.removeClass("good").addClass("bad").text(e.stock.bad+l);}else{if(o){n.removeClass(d.okR);
g.removeClass("good").addClass("bad").text(e.minCupones.bad);}else{n.addClass(d.okR);g.removeClass("bad").addClass("good").text(e.requerido.good);}}},validStockLimite:function(h,j,g){var i=$(g),k;
if(g=="#stock"){k=parseInt(h.val())>parseInt(i.val());if(h.val()==""||h.val()=="0"){k=true;}}if(g=="#maximo_por_subscriptor"){k=parseInt(h.val())<parseInt(i.val());
if(h.val()==""||h.val()=="0"){k=true;}}if(k){h.removeClass(d.okR);j.removeClass("good").addClass("bad").text(e.minCupones.bad);i.addClass(d.okR);i.siblings(".response").addClass("good").removeClass("bad").text(e.requerido.good);
}else{h.addClass(d.okR);j.removeClass("bad").addClass("good").text(e.requerido.good);i.addClass(d.okR);i.siblings(".response").addClass("good").removeClass("bad").text(e.requerido.good);
}},fCheckInputGenerarCupon:function(g,i,h,k,j){$(g).bind("change",function(n){n.preventDefault();var m=$(i).parents(".bloqueNbeneficio").find(d.rs);var l=$("#div_descripcionCupon");
if($(this).is(":checked")){$(i).removeClass("ready").addClass("requerido");m.removeClass("good").addClass("bad").text(e.requerido.bad);l.slideDown("fast");
}else{$(i).removeClass("requerido ready").val("");m.removeClass("bad").addClass("good").text(e.requerido.good);l.slideUp("fast");}});},fCheckInput:function(n,m,l,j,h,g,k,o,i){$(n).bind("change",function(v){v.preventDefault();
var s=$(m);var u=$(this).parents(".bloqueNbeneficio").find(d.rs);var t=this,q=0;if(m=="#maximo_por_subscriptor"){$.each($("ol#dataOLRes li.rowCont input"),function(r,w){if($(w).attr("rel")=="mxs"){q++;
if($(t).is(":checked")==true){$(w).val("0");}else{$(w).val("");}$(w).attr("disabled",$(t).is(":checked"));}});}if(k){if($(g).val()!=0){s.attr("disabled",$(this).is(":checked"));
if($(this).is(":checked")){u.removeClass("bad").addClass("good").text(l);s.addClass(d.okR);c.fGetContactoEstablecimiento(g,o,m);}else{u.removeClass("good").addClass("bad").text(j);
s.removeClass(d.okR);s.val("");}}else{$(this).attr("checked",false);location.hash=g;var p=$(g).parents(".bloqueNbeneficio").find(d.rs);p.text("");p.removeClass("good").addClass("bad").text(i.bad);
$("html, body").animate({scrollTop:180},"slow");}}else{s.attr("disabled",$(this).is(":checked"));if($(this).is(":checked")){u.removeClass("bad").addClass("good").text(l);
s.addClass(d.okR);}else{if(q>0){}else{u.removeClass("good").addClass("bad").text(j);s.removeClass(d.okR);}}s.val("");}if(q>0){$("#maximo_por_subscriptor").attr("disabled",true);
}else{}});},fCheckDate:function(g,i,h,k,j){$(g).change(function(n){n.preventDefault();var m=$(this).parents(".bloqueNbeneficio").find(d.rs);var l=$(i);
if($(this).is(":checked")){l.val(a);m.removeClass("bad").addClass("good").text(h);l.addClass(d.okR);}else{m.removeClass("good").addClass("bad").text(k);
l.removeClass(d.okR);l.val("");}});},fGetContactoEstablecimiento:function(h,i,j){var g={id:$(h).val()};$.ajax({url:"/gestor/beneficios/obtener-establecimiento-info",type:"GET",dataType:"json",data:g,success:function(k){if(i=="email"){$(j).val(k.email);
}else{if(i=="telefono"){$(j).val(k.telefono);}}}});},fSelect:function(h,g){$(h).bind("change",function(k){var i=$(this),j=$(this).parents(".bloqueNbeneficio").find(d.rs);
if($(h).val()==0){j.removeClass("good").addClass("bad").text(g.bad);$(h).removeClass(d.okR);}else{var l=false;if(h=="#tipo_beneficio_id"&&$(h).val()==tipBen_idConcurso){l=true;
}c.detacado_banner(1,2,l,false,"#cat_seleccionadas");j.removeClass("bad").addClass("good").text(g.good);$(h).addClass(d.okR);}});},chapa:function(i,g,p,m,l,j){var k=$(i),o=k.parent(),h=$(p),q=$(g);
q.bind("click",function(){var u=$(this),s=u.attr("rel");h.val("");if(!((u.parent()).hasClass("active"))){q.parent().removeClass("active");o.removeAttr("class").addClass(s);
u.parent().addClass("active");h.val(s);}});var r=f;var n=k.parents(".bloqueNbeneficio").find(".response");k.keypress(function(u){var t=u.keyCode||u.charCode||u.which||window.e,s=false;
if(t==16){s=true;}return((t==8)||(t==9)||(t==13)||(t==37)||(t==39)||(t==46&&s==false)||(t==48&&s==false)||(t==49&&s==false)||(t==50&&s==false)||(t==51&&s==false)||(t==52&&s==false)||(t==53&&s==false)||(t==54&&s==false)||(t==55&&s==false)||(t==56&&s==false)||(t==57&&s==false)||(t==88)||(t==120));
}).keyup(function(v){var u=$(this),s=u.val();if(s.length>0){n.text(j).removeClass("bad good");if(s.length>1&&r.test(s)){n.text(m).removeClass("bad").addClass("good");
}}else{n.text("").removeClass("bad good");}});k.bind("paste",function(){return false;});k.parent().mouseleave(function(){if(k.val().length>0){k.addClass("shadowOut");
}else{k.removeClass("shadowOut");}}).mouseenter(function(){if(k.val().length>0){k.removeClass("shadowOut");}else{k.removeClass("shadowOut");}});},deleteDetaPromocion:function(g){$(g).bind("click",function(n){n.preventDefault();
var q=$(this).parents(".rowCont");var o=q.next("br");var k=$("#stock");var l=$("#labelTipoDsct"),h=$("#inputValidTD"),j=$("#cntTmonedaAW"),p=$("#resListNMB");
q.remove();o.remove();var i=$("#cntStockAW");if($("#dataOLRes .rowCont").size()<=0){i.slideDown("fast");j.slideDown("fast");k.addClass("requerido");l.find("span").remove();
h.removeClass("requerido ready");p.text("").removeClass("bad good");}else{i.slideUp("fast");h.removeClass("requerido");}var m=0;$.each($("ol#dataOLRes li.rowCont input"),function(r,s){if($(s).attr("rel")!=undefined){if($(s).attr("rel")=="mxs"){m++;
if(m==1){}}}});if(m>0){$("#maximo_por_subscriptor").attr("disabled",true);}else{$("#maximo_por_subscriptor").removeClass("ready");$("#maximo_por_subscriptor").attr("disabled",false);
}c.fInputSumarBeneficio2(".tipProMaximoSusc","#maximo_por_subscriptor");});},placeholder:function(){var g=$("input.placeH, textarea.placeH");g.focus(function(){var h=$(this);
if(h.val()==h.attr("alt")){h.val("").removeClass("cGray");}});g.blur(function(){var h=$(this);if(h.val()==""){h.val(h.attr("alt")).addClass("cGray");}});
},tipoPromocion:function(g){$(g).bind("click",function(j){j.preventDefault();var i=Math.floor(Math.random()*1000001);var m="del"+i;var l=$("<li class='rowCont'><input alt='Código' maxlength='100' value='Código' class='placeH inputNbeneStock cGray' type='text' name='detTipDesc[d"+i+"][d_codigo]'/> <input alt='Monto' maxlength='8' value='Monto' class='money placeH inputNbeneStock cGray' type='text' name='detTipDesc[d"+i+"][d_descuento]'/> <input alt='Max S.' maxlength='4' value='Max S.' class='money placeH inputNbeneStock cGray tipProMaximoSusc' type='text' name='detTipDesc[d"+i+"][d_maximo_por_suscriptor]' rel='mxs'/> <input alt='Descripción' maxlength='250' value='Descripción' class='placeH cGray' type='text' name='detTipDesc[d"+i+"][d_descripcion]'/><a href='#' class='deleteTD' id='"+m+"'>Eliminar</a></li>");
var h=$("#dataOLRes");h.append(l);c.deleteDetaPromocion("#"+m);c.placeholder();c.validaMntoDcto(".money");c.sumaDesc();c.fInputSumarBeneficio(".tipProMaximoSusc","#maximo_por_subscriptor");
$("#maximoxs").removeClass("bad").addClass("good").text("¡OK!");var k=0;$.each($("ol#dataOLRes li.rowCont input"),function(n,o){if($(o).attr("rel")!=undefined){if($(o).attr("rel")=="mxs"){k++;
$(o).attr("disabled",$("#sin_limite_por_suscriptor").is(":checked"));if($("#sin_limite_por_suscriptor").is(":checked")==true){$(o).val("0");}}}});if(k>0){$("#maximo_por_subscriptor").attr("disabled",true);
if($("#sin_limite_por_suscriptor").is(":checked")==true){}}else{$("#maximo_por_subscriptor").attr("disabled",false);}});},sumaDesc:function(){var n=$("#dataOLRes .inputQty"),h=0,k=$("#stock"),m=$("#sin_stock"),g=$("#cntStockAW"),i=$("#cntTmonedaAW"),l=$("#labelTipoDsct"),j=$("#inputValidTD");
if(n.size()>0){i.slideDown("fast");j.addClass("requerido");k.removeClass("requerido ready").removeAttr("disabled");m.removeAttr("disabled");m.removeAttr("checked");
l.find("span").remove();l.prepend('<span class="req">*</span>');}else{i.slideUp("fast");l.find("span").remove();j.removeClass("requerido");}},validaMntoDcto:function(g){var i=$(g),h=0;
i.live("keypress",function(m){var j=false;var l=m.keyCode||m.charCode||m.which||window.e;var k=$(this).val();if((l>=48&&l<=57)||(l==46)||(l==8)||(l==9)||(l==39)||(l==37)){j=true;
if(l==46){h++;if(h>1&&k.indexOf(".")>=0){j=false;}if(k.length==0){j=false;}}}return j;});}};c.init();c.logo();c.submit();c.categorias("#cat_right","#cat_disponibles","#cat_seleccionadas","#cat_seleccionadas",e.categorias.good,e.categorias.bad,e.categorias.def);
c.categorias("#cat_left","#cat_seleccionadas","#cat_disponibles","#cat_seleccionadas",e.categorias.good,e.categorias.bad,e.categorias.def);c.inputPdfInfo("#pdf_info","#dataUpPdfInfo");
c.fInput("#descripcion",e.requerido.good,e.requerido.bad,"Ingrese la descripcion del beneficio. Máximo 250 caracteres.");c.fInput("#titulo",e.requerido.good,e.requerido.bad,"Ingrese el nombre del beneficio");
c.fInput("#descripcion_corta",e.requerido.good,e.requerido.bad,"Ingrese un resumen de la descripcion del beneficio. Máximo 120 caracteres.");c.fInput("#descripcion_cupon",e.requerido.good,e.requerido.bad,"Ingrese un resumen de la descripcion para el cupon. Máximo 300 caracteres.");
c.fInput("#maximo_por_subscriptor",e.requerido.good,e.requerido.bad,e.requerido.def);c.fInput("#stock",e.requerido.good,e.requerido.bad,e.requerido.def);
c.fInputSumarBeneficio(".tipProMaximoSusc","#maximo_por_subscriptor");c.fInput("#telefono_info",e.requerido.good,e.requerido.bad,e.requerido.def);c.fMail("#email_info",e.email.good,e.email.bad,e.email.def);
c.fOnlyNumTlf("#telefono_info");c.fOnlyNum("#stock");c.fOnlyNum("#maximo_por_subscriptor");c.fCheckInput("#sin_stock","#stock",e.requerido.good,e.requerido.bad,e.requerido.def,"",false,"",null);
c.fCheckInput("#email_info_establecimiento","#email_info",e.requerido.good,e.requerido.bad,e.requerido.def,"#establecimiento_id",true,"email",e.establecimiento);
c.fCheckInput("#telefono_info_establecimiento","#telefono_info",e.requerido.good,e.requerido.bad,e.requerido.def,"#establecimiento_id",true,"telefono",e.establecimiento);
c.fCheckInput("#sin_limite_por_suscriptor","#maximo_por_subscriptor",e.requerido.good,e.requerido.bad,e.requerido.def,"",false,"",null);c.fCheckInputGenerarCupon("#generar_cupon","#descripcion_cupon",e.requerido.good,e.requerido.bad,e.requerido.def);
c.fSelect("#tipo_beneficio_id",e.tipo_beneficio);c.fSelect("#chapita_color",e.chapita);c.chapa("#chapita",".aColorCh","#chapita_color",e.requerido.good,e.requerido.bad,"Ingrese el contenido correcto de la chapita. Ejm: 2x1, 45%");
c.showInfo("#valor");c.showInfo("#cuando");c.showInfo("#direccion");c.showInfo("#informacion_adicional");c.showInfo("#como");c.tipoPromocion("#tipoPromocion");
c.validaMntoDcto(".money");c.deleteDetaPromocion(".delD");c.validCantMaxPorSuscriptor(".maxPorSusc_tipDesc");});$(function(){var a=0;$.each($("ol#dataOLRes li.rowCont input"),function(b,c){if($(c).attr("rel")!=undefined){if($(c).attr("rel")=="mxs"){a++;
$(c).attr("disabled",$("#sin_limite_por_suscriptor").is(":checked"));}}});});